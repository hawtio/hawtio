<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>configure your hawtio</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="A HTML5 web console for managing Java services with support for JMX, OSGi, Apache ActiveMQ, Apache Camel and Fuse Fabric. Open source, modular and extensible" name="description" />
    <link href="/stylesheets/normalize.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/theme.css" rel="stylesheet">
    <link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet">
    <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script>
    <script src="//static.jboss.org/js/_jbossorg-tabzilla.js"></script>

    <!--
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>

  <body class="home">

    <!-- begin dropup -->
    <div class="dropup visible-md visible-lg visible-sm">
      <div id="ajbossproject">A JBoss Project</div> 
      <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
      <script>
    window.addEventListener('load', function() {
        renderTabzilla("hawtio", "hawtio")
        }, false);
      </script>
    </div>
    <!-- end dropup -->

    <!-- begin top banner -->
    <div class="top-banner visible-md visible-lg visible-sm">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <a class="top-banner-logo" href="/">
              <img src="/images/hawtio_logo.svg" />
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--
    <div class="container visible-md visible-lg visible-sm">
      <div class="row">
        <div class="col-md-12 top-banner">
          <a href="/"></a>
        </div>
      </div>
    </div>
    -->
    <!-- end top banner -->

    <!-- begin header -->
    <div class="top-bar navbar navbar-default" role="navigation">
      <!-- begin inner container --> 
      <div class="container">
        <!-- begin inner row -->
        <div class="row">
          <!-- begin logo/toggle -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav-collapse">
              <span class="sr-only">Toggle Navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand visible-xs" href="/">
              <img src="/images/logo-100px.png" />
            </a>
            <hr class="visible-xs">
          </div>
          <!-- end logo/toggle -->

          <!-- begin navbar -->
          <div id="main-nav-collapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/getstarted/index.html" title="find out how to get started using hawtio to manage your java stuff">Get Started Now!</a></li>
              <li><a href="/docs/index.html">Documentation</a></li>
              <li><a href="/community/index.html">Community</a></li>
              <li><a href="/articles/index.html" title="view the demos of using hawtio with Apache ActiveMQ, Apache Camel and JBoss Fuse">Demos</a></li>
              <li><a href="https://github.com/hawtio/hawtio">github</a></li>
            </ul>
          </div>
          <!-- end navbar -->
        </div>
        <!-- end inner row -->
      </div>
      <!-- end inner container --> 
    </div>
    <!-- end header -->

    <!-- begin page display -->
    <div id="main">
		  <p><div class="container">
    <div class="row">
      <div class="col-md-12">
      <h1>Configuration</h1>
  ## Environment Variables</p>

<p>Using <a href="http://docker.io/">Docker</a> containers is increasingly common. We now have a <a href="https://github.com/fabric8io/hawtio-docker">docker container for running hawtio</a> for example.</p>

<p>When using docker then environment variables are a preferred way to configure things with environmental values.</p>

<p>So when using <strong>hawtio-base</strong> or <strong>hawtio-default</strong> you can use environment variables to override any of the properties on this page.</p>

<p>To override property &ldquo;hawtio.foo&rdquo; just set an environment variable (using _ for dots).</p>

<pre><code>export hawtio_foo=bar</code></pre>

<p>and if you boot up hawtio in that shell (or you pass that variable into a docker container) then you will override the system property <em>hawtio.foo</em></p>

<h2 id = "Configuring_Security">Configuring Security</h2>

<p>hawtio enables security out of the box depending on the container it is running within. Basically there is two types of containers:</p>

<ul>
<li>Karaf based containers</li>
<li>Web containers</li>
</ul>

<h4 id = "Default_Security_Settings_for_Karaf_containers">Default Security Settings for Karaf containers</h4>

<p>By default the security in hawtio uses these system properties when running in Apache Karaf containers (Karaf, ServiceMix, JBoss Fuse) which you can override:</p>

<table class="buttonTable table table-striped">
  <thead>
  <tr>
    <th>Name</th>
    <th>Default</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>
      hawtio.authenticationEnabled
    </td>
    <td>
      true
    </td>
    <td>
      Whether or not security is enabled
    </td>
  </tr>
  <tr>
    <td>
      hawtio.realm
    </td>
    <td>
      karaf
    </td>
    <td>
      The security realm used to login
    </td>
  </tr>
  <tr>
    <td>
      hawtio.role or hawtio.roles
    </td>
    <td>
      admin,viewer
    </td>
    <td>
      The user role or roles required to be able to login to the console. Multiple roles to allow can be separated by a comma.  Set to * or an empty value to disable role checking when hawtio authenticates a user.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.rolePrincipalClasses
    </td>
    <td>      
    </td>
    <td>
      Principal fully qualified classname(s). Multiple classes can be separated by a comma.  Leave unset or set to an empty value to disable role checking when hawtio authenticates a user.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.noCredentials401
    </td>
    <td>
      false
    </td>
    <td>
      Whether to return HTTP status 401 when authentication is enabled, but no credentials has been provided. Returning 401 will cause the browser popup window to prompt for credentails. By default this option is false, returning HTTP status 403 instead.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.authenticationContainerDiscoveryClasses
    </td>
    <td>
      io.hawt.web.tomcat.TomcatAuthenticationContainerDiscovery
    </td>
    <td>
        List of used AuthenticationContainerDiscovery implementations separated by comma. By default there is just TomcatAuthenticationContainerDiscovery, which is used to authenticate users on Tomcat from tomcat-users.xml file. Feel free to remove it if you want to authenticate users on Tomcat from configured jaas login module or feel free to add more classes of your own.
    </td>
  </tr>    
  </tbody>
</table>

<p>Changing these values is often application server specific. Usually the easiest way to get hawtio working in your container is to just ensure you have a new user with the required role (by default its the 'admin' role).</p>

<h5 id = "Example:_customize_the_allowed_roles_in_Fabric8">Example: customize the allowed roles in Fabric8</h5>

<p>Hawtio reads its values in form of system properties. To define them in Fabric8:</p>

<pre><code>dev:system-property hawtio.roles my_organization_admin
# restart hawtio bundle
restart io.hawt.hawtio-web</code></pre>

<p>Now only users with the <code>my_organization_admin</code> role will be allowed to login in Hawtio.</p>

<p>To add the <code>my_organization_admin</code> role to the <code>admin</code> user in Fabric8:</p>

<pre><code>jaas:manage --realm karaf
jaas:roleadd admin my_organization_admin
jaas:update</code></pre>

<h4 id = "Default_Security_Settings_for_web_containers">Default Security Settings for web containers</h4>

<p>By default the security in hawtio uses these system properties when running in any other container which you can override:</p>

<table class="buttonTable table table-striped">
  <thead>
  <tr>
    <th>Name</th>
    <th>Default</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>
      hawtio.authenticationEnabled
    </td>
    <td>
      false
    </td>
    <td>
      Whether or not security is enabled
    </td>
  </tr>
  <tr>
    <td>
      hawtio.realm
    </td>
    <td>
      *
    </td>
    <td>
      The security realm used to login
    </td>
  </tr>
  <tr>
    <td>
      hawtio.role or hawtio.roles
    </td>
    <td>
    </td>
    <td>
       The user role or roles required to be able to login to the console. Multiple roles to allow can be separated by a comma.  Set to * or an empty value to disable role checking when hawtio authenticates a user.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.rolePrincipalClasses
    </td>
    <td>
    </td>
    <td>
      Principal fully qualified classname(s). Multiple classes can be separated by comma.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.noCredentials401
    </td>
    <td>
    </td>
    <td>
       Whether to return HTTP status 401 when authentication is enabled, but no credentials has been provided. Returning 401 will cause the browser popup window to prompt for credentails. By default this option is false, returning HTTP status 403 instead.
    </td>
  </tr>
  <tr>
    <td>
      hawtio.authenticationContainerDiscoveryClasses
    </td>
    <td>
      io.hawt.web.tomcat.TomcatAuthenticationContainerDiscovery
    </td>
    <td>
        List of used AuthenticationContainerDiscovery implementations separated by comma. By default there is just TomcatAuthenticationContainerDiscovery, which is used to authenticate users on Tomcat from tomcat-users.xml file. Feel free to remove it if you want to authenticate users on Tomcat from configured jaas login module or feel free to add more classes of your own.
    </td>
  </tr>  
  </tbody>
</table>

<h4 id = "Configuring_or_disabling_security_in_web_containers">Configuring or disabling security in web containers</h4>

<p>Set the following JVM system property to enable security:</p>

<pre><code>hawtio.authenticationEnabled=true</code></pre>

<p>Or adjust the web.xml file and configure the &lt;env-entry&gt; element, accordingly.</p>

<h5 id = "Configuring_security_in_Apache_Tomcat">Configuring security in Apache Tomcat</h5>

<p>From <strong>hawt 1.2.2</strong> onwards we made it much easier to use Apache Tomcats userdata file (conf/tomcat-users.xml) for security.
All you have to do is to set the following <strong>CATALINA_OPTS</strong> environment variable:</p>

<pre><code>export CATALINA_OPTS=-Dhawtio.authenticationEnabled=true</code></pre>

<p>Then <strong>hawtio</strong> will auto detect that its running in Apache Tomcat, and use its userdata file (conf/tomcat-users.xml) for security.</p>

<p>For example to setup a new user named scott with password tiger, then edit the file '''conf/tomcat-users.xml''' to include:</p>

<pre><code>&lt;user username="scott" password="tiger" roles="tomcat"/&gt;</code></pre>

<p>Then you can login to hawtio with the username scott and password tiger.</p>

<p>If you only want users of a special role to be able to login <strong>hawtio</strong> then you can set the role name in the <strong>CATALINA_OPTS</strong> environment variable as shown:</p>

<pre><code>export CATALINA_OPTS='-Dhawtio.authenticationEnabled=true -Dhawtio.role=manager'</code></pre>

<p>Now the user must be in the manager role to be able to login, which we can setup in the '''conf/tomcat-users.xml''' file:</p>

<pre><code>&lt;role rolename="manager"/&gt;
&lt;user username="scott" password="tiger" roles="tomcat,manager"/&gt;</code></pre>

<p>Note that if you still want to use your own login modules instead of conf/tomcat-users.xml file, you can do it by remove TomcatAuthenticationContainerDiscovery from <br/>
system properties and point to login.conf file with your login modules configuration. Something like:</p>

<pre><code>export CATALINA_OPTS='-Dhawtio.authenticationEnabled=true -Dhawtio.authenticationContainerDiscoveryClasses= -Dhawtio.realm=hawtio -Djava.security.auth.login.config=$CATALINA_BASE/conf/login.conf'</code></pre>

<p>Then you can configure jaas in file TOMCAT_HOME/conf/login.conf (Example of file below in jetty section).     </p>

<h5 id = "Configuring_security_in_Jetty">Configuring security in Jetty</h5>

<p>To use security in jetty you first have to setup some users with roles. To do that navigate to the etc folder of your jetty installation and create the following file etc/login.properties and enter something like this:</p>

<pre><code>scott=tiger, user
admin=CRYPT:adpexzg3FUZAk,admin,user</code></pre>

<p>You have added two users. The first one named scott with the password tiger. He has the role user assigned to it. The second user admin with password admin which is obfuscated (see jetty realms for possible encryption methods). This one has the admin and user role assigned.</p>

<p>Now create a second file in the same directory called login.conf. This is the login configuration file.</p>

<pre><code>hawtio {
  org.eclipse.jetty.jaas.spi.PropertyFileLoginModule required 
  debug="true"
  file="${jetty.base}/etc/login.properties";
};</code></pre>

<p>Next you have to change the hawtio configuration:</p>

<table class="buttonTable table table-striped">
  <thead>
  <tr>
    <th>Name</th>
    <th>Default</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>
      hawtio.authenticationEnabled
    </td>
    <td>
      true
    </td>
    <td>
      Whether or not security is enabled
    </td>
  </tr>
  <tr>
    <td>
      hawtio.realm
    </td>
    <td>
      hawtio
    </td>
    <td>
      The security realm used to login
    </td>
  </tr>
  <tr>
    <td>
      hawtio.role
    </td>
    <td>
    admin
    </td>
    <td>
      The user role required to be able to login to the console
    </td>
  </tr>
  <tr>
    <td>
      hawtio.rolePrincipalClasses
    </td>
    <td>
    </td>
    <td>
      Principal fully qualified classname(s). Multiple classes can be separated by comma.
    </td>
  </tr>
  </tbody>
</table>

<p>You have now enabled security for hawtio. Only users with role &ldquo;admin&rdquo; are allowed.</p>

<p>At last enable the jaas module in jetty. This is done by adding the following line to the start.ini which is located in the jetty.base folder:</p>

<pre><code># Enable security via jaas, and configure it
--module=jaas</code></pre>

<h4 id = "Keycloak_integration">Keycloak integration</h4>

<p>Hawtio can now be integrated with <a href="http://www.keycloak.org">Keycloak</a> for SSO authentication. See details <a href="https://github.com/mposolda/hawtio/blob/master/sample-keycloak-integration/README.md">here</a> . </p>

<h2 id = "Configuration_Properties">Configuration Properties</h2>

<p>The following table contains the various configuration settings for the various hawtio plugins.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>System Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>hawtio.offline</td>
      <td>Whether to run hawtio in offline mode (default false). When in offline mode, then some plugins is not enabled such as <a href="http://hawt.io/plugins/maven/">Maven</a> and <a href="http://hawt.io/plugins/git/">Git</a>.</td>
    </tr>
    <tr> 
      <td>hawtio.dirname</td>
      <td>The directory name for the hawtio home. Is by default <tt>/.hawtio</tt>. This complete home directory for hawtio is the <tt>hawtio.config.dir</tt><tt>hawtio.dirname</tt>, so remember to have leading / in this option. The out of the box options translates as the: <tt>user.home/.hawtio</tt> directory.</td>
    </tr>
    <tr> 
      <td>hawtio.config.dir</td>
      <td>The directory on the file system used to keep a copy of the configuration for hawtio; for all user settings, the dashboard configurations, the wiki etc. Typically you will push this configuration to some remote git server (maybe even github itself) so if not specified this directory will be a temporary created directory. However if you are only running one hawtio server then set this somewhere safe and you probably want to back this up!. See also the hawtio.dirname option.</td>
    </tr>
    <tr>
      <td>hawtio.config.repo</td>
      <td>The URL of the remote git repository used to clone for the dashboard and wiki configuration. This defaults to <b>git@github.com:hawtio/hawtio-config.git</b> but if you forked the hawtio-config repository then you would use your own user name; e.g. <b>git@github.com:myUserName/hawtio-config.git</b></td>
    </tr>
    <tr>
      <td>hawtio.config.cloneOnStartup</td>
      <td>If set to the value of <b>false</b> then there will be no attempt to clone the remote repo</td>
    </tr>
    <tr>
      <td>hawtio.config.importURLs</td>
      <td>The URLs (comman separated) of jar/zip contents that should be downloaded and imported into the wiki on startup. This supports the <code>mvn:group/artifact/version[/extension/classifier]</code> syntax so you can refer to jars/zips from maven repos</td>
    </tr>
    <tr>
      <td>hawtio.config.pullOnStartup</td>
      <td>If set to the value of <b>false</b> then there will be no attempt to pull from the remote config repo on startup</td>
    </tr>
    <tr>
      <td>hawtio.maven.index.dir</td>
      <td>The directory where the maven indexer will use to store its cache and index files</td>
    </tr>
    <tr>
      <td>hawtio.sessionTimeout</td>
      <td><strong>hawtio 1.2.2</strong> The maximum time interval, in seconds, that the servlet container will keep this session open between client accesses. If this option is not configured, then hawtio uses the default session timeout of the servlet container.</td>
    </tr>
  </tbody>
</table>

<h2 id = "Web_Application_configuration">Web Application configuration</h2>

<p>If you are using a web container, the easiest way to change the web app configuration values is:</p>

<ul>
<li>Create your own WAR which depends on the <strong>hawtio-default.war</strong> like the <a href="https://github.com/hawtio/hawtio/blob/master/sample/pom.xml#L17">sample project's pom.xml</a></li>
<li>Create your own <a href="https://github.com/hawtio/hawtio/blob/master/sample/src/main/resources/blueprint.properties#L7">blueprint.properties</a> file that then can override whatever properties you require</li>
</ul>

<h4 id = "OSGi_configuration">OSGi configuration</h4>

<p>Just update the blueprint configuration values in OSGi config admim as you would any OSGi blueprint bundles. On OSGi all the hawtio Java modules use OSGi blueprint.</p>

<h4 id = "More_information">More information</h4>

<p>In the <a href="http://hawt.io/articles/index.html">articles</a> colleciton you may find links to blog posts how to setup authentication with hawtio in various other containers. </p>

<p>  </div>
    </div>
      </div></p>
    </div>
    <!-- end page display -->

    <!-- begin footer -->
    <div class="footer">
      <!-- begin footer container -->
      <div class="container">
        <!-- begin footer row -->
        <div class="row">
          <!-- begin project info -->
          <div class="project col-md-4">
            <p>
              <img class="logo-big" src="/images/logo-450px.png">
            </p>
            <p>
              <i class="icon-fire"></i>
              Mixed with <a href="http://getbootstrap.com/">Bootstrap</a>. Baked by <a href="http://scalate.fusesource.org">Scalate</a>.
            </p>
              <i class="icon-share-alt"></i>
            <p>
              Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            </p>
            <p>
              Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
            </p>
          </div>
          <!-- end project info -->

          <!-- begin footer-nav -->
          <div class="footer-nav col-md-2">
            <h4>Learn</h4>
            <ul>
              <li>
                <a href="/getstarted/index.html">Get Started</a>
              </li>
              <li>
                <a href="/articles/index.html">Articles and Demos</a>
              </li>
              <li>
                <a href="/faq/index.html">FAQ</a>
              </li>
              <li>
                <a href="/developers/index.html">Developers</a>
              </li>
              <li>
                <a href="/building/index.html">Building</a>
              </li>
            </ul>
          </div>
          <!-- end footer-nav -->

          <!-- begin footer-nav -->
          <div class="footer-nav col-md-2">
            <h4>Get Involved</h4>
            <ul>
              <!--
              <li>
                <a href="http://community.jboss.org/en/hawtio?view=discussions">Forums</a>
              </li>
              -->
              <li>
                <a href="/contributing/index.html">Contributing</a>
              </li>
              <li>
                <a href="/community/index.html">Community</a>
              </li>
              <li>
                <a href="https://github.com/hawtio/hawtio/issues?state=open">Issue Tracker</a>
              </li>
              <li>
                <a href="https://github.com/hawtio/hawtio">Source Code</a>
              </li>
              <!--
              <li>
                <a href="/community/contributors">Contributors</a>
              </li>
              -->
            </ul>
          </div>
          <!-- end footer-nav -->

          <!-- begin sponsor -->
          <div class="sponser col-md-4">
            <!-- begin follow-us -->
            <div class="follow-us">
              <h4>Stay Informed</h4>
              <ul>
                <!--
                <li>
                  <a href="https://plus.google.com/100660127586085393031"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow hawtio on Google+" /></a>
                </li>
                -->
                <li>
                  <a href="https://twitter.com/#!/search/%23hawtio"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #hawtio hashtag on Twitter" /></a>
                </li>
                <!--
                <li>
                  <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the hawtio group on LinkedIn" /></a>
                </li>
                <li>
                  <a href="http://vimeo.com/channels/hawtio"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the hawtio channel on Vimeo" /></a>
                </li>
                -->
              </ul>
            </div>
            <!-- end follow-us -->

            <p>This website is open source! If you want to improve it, <a href="http://github.com/hawtio/hawtio">fork the project</a>, hack on it, then send a pull request. You can also view the <a href="http://www.seethestats.com/site/hawtio">visitor stats</a>.</p>
          </div>
        <!-- end sponsor -->
        </div>
        <!-- end footer row -->

        <!-- begin top link row -->
        <div class="row">
          <div class="col-md-12">
            <p class="link-top text-center">
              <a class="visible-desktop" href="#" id="toTop">Top</a>
            </p>
          </div>
        </div>
        <!-- end top link row -->

      </div>
      <!-- end footer container -->

      <div class="container" id="companyfooter">
        <div class="redhatlogo" style="text-align:center;">
          <div id="logospacer"></div>
            <a href="http://www.redhat.com/">
            <img src="http://static.jboss.org/theme/images/common/redhat_logo.png">
          </a>
        </div>
      </div>

    </div>
    <!-- end footer -->


    <!-- begin scripts -->
    <script type="text/javascript">
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <!--
    <script src="/javascripts/prettify.js"></script>
    -->
    <!--
    <script src="/javascripts/site.js"></script>
    -->
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-36899203-1']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
    <!-- end scripts -->
  </body>
</html>
